Ссылка на бот: https://t.me/sd_courses_feedback_bot


По дефолту доступны только команды студента, чтобы стать админом напишите @nikitayusupov


---

## Цель

Разработать Telegram-бота для автоматизации сбора обратной связи от студентов, обучающихся на курсе. Бот должен отправлять опросы участникам из заданных куратором списков, собирать ответы и сохранять их в БД (позже добавим Google Таблицы).

## Основные функции

#### **Отправка опросов**

* Бот рассылает опросы по запросу от куратора (/send\_now) выбранной группе студентов.  
* Опрос отправляется в **личные сообщения** каждому участнику из заранее сохраненного списка.  
* Опрос состоит из **до 7 вопросов**, включающих:  
  * Вопросы с ответом по шкале от 1 до 10\.  
  * Вопросы со **свободной формой ответа**.  
* Вопросы отправляются **по одному** — следующий приходит **только после ответа на предыдущий**.  
* Студент может **пропустить вопрос** командой /skip.

#### **Работа с группами**

* Куратор может создавать и настраивать **несколько групп студентов**:  
  * Команда /set\_group — создание новой группы.  
  * Команда /set\_recipients — добавление или обновление участников группы (по @username).  
* Куратор может задавать и редактировать **список вопросов** для каждой группы:  
  * Команда /set\_questions — загрузка или редактирование вопросов.

#### **Ответы и фидбек**

* Команда /feedback доступна студентам в любой момент:  
  * Ввод темы вопроса.  
  * Ввод текста фидбека в свободной форме.  
* Фидбек сохраняется в Google Таблице и отправляется куратору.

#### **Старт и справка**

* /start — приветственное сообщение, описание целей бота.  
* /help — список доступных команд и их назначение.

## Хранение данных

#### **Список студентов**

* Хранится внутри бота отдельно для каждой группы.  
* Поддерживается редактирование, добавление и удаление.

#### **Список вопросов**

* Хранится отдельно для каждой группы.  
* Возможность редактирование добавление и удаление.

## Технические детали

### Правила нейминга для username в коде: 
- Ввод куратора требует @.
- Хранение и поиск в БД — всегда без @.
- Проверка прав куратора — удаляет @ перед поиском.
- Фидбек студента — сохраняется без @.

### Роли
- Студент
    - Имеет доступ к команде feedback, а также может отвечать на присылаемые опросы
- Куратор
    - Привязан к определенному курсу (или нескольким курсам)
    - Имеет доступ к командам управлениям группами: может создавать и удалять группы в рамках доступных курсов
    - Может добавлять и удалять студентов из групп в рамках своего курса
- Админ
    - Не привязан к курсу или группе
    - Может управлять курсами: создать новые и удалять существующие курсы (при этом удаляются все связанные с курсом группы)
    - Может управлять кураторами: добавлять новых кураторов или удалять существующих, назначить их на определенные группы 
    


## Функциональность для куратора

* **/set\_group**  — создать группу слушателей   
  - Для создания группы нужно выбрать курс, к котором будет привязана группа. Группа может быть привязана только к одному курсу. 
  - В рамках одного курса не должно быть двух групп с одинаковым названием. При этом группы из разных курсов могут называться одинаково. 
* **/list\_groups** — показать список групп для выбранного курса
* **/set\_recipients** — Добавление или обновление списка студентов внутри группы  
  - Куратор вводит список юзеров, из которых будет состоять группа
  - Если в группе уже состояли какие-то студенты, которых нет в новом списке, то такие студенты удаляются из группы. 
  - Студент может состоять только в одной группе в рамках заданного, поэтому при попытке добавить студента во вторую группу будет выдана ошибка. 
    - При этом студент может состоять в разных группах, если эти группы относятся к разным курсам. 
* **/set\_questions** — добавить или изменить список вопросов для конкретной группы  
  - Если для данной группы уже созданые какие-то вопросы, то сначала куратору предлагается удалить все вопросы, а затем создать новые. 
* **/send\_now** — вручную запустить опрос для выбранной группы студентов

## Функциональность для админа 
- delete_course
  - Удаляется выбранный курс. 
  - Вместе с курсом удаляются и все группы внутри данного курса. 
    - Из каждой группы также отчисляются все студенты, которые были привязаны к этой группе
